define(["exports","preact/hooks","./hooks/UNSAFE_useUser","./utils/PRIVATE_floatingUtils"],function(t,e,n,r){"use strict";const o=["alignment","allowedPlacements","autoAlignment"],i=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],l=["strategy"],a=["mainAxis","crossAxis","limiter"],s=["apply"];function c(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){return t.split("-")[0]}function h(t){return t.split("-")[1]}function y(t){return["top","bottom"].includes(g(t))?"x":"y"}function b(t){return"y"===t?"height":"width"}function w(t,e,n){let{reference:r,floating:o}=t;const i=r.x+r.width/2-o.width/2,l=r.y+r.height/2-o.height/2,a=y(e),s=b(a),c=r[s]/2-o[s]/2,f="x"===a;let u;switch(g(e)){case"top":u={x:i,y:r.y-o.height};break;case"bottom":u={x:i,y:r.y+r.height};break;case"right":u={x:r.x+r.width,y:l};break;case"left":u={x:r.x-o.width,y:l};break;default:u={x:r.x,y:r.y}}switch(h(e)){case"start":u[a]-=c*(n&&f?-1:1);break;case"end":u[a]+=c*(n&&f?-1:1)}return u}function v(t){return"number"!=typeof t?function(t){return p({top:0,right:0,bottom:0,left:0},t)}(t):{top:t,right:t,bottom:t,left:t}}function x(t){return p(p({},t),{},{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height})}async function O(t,e){var n;void 0===e&&(e={});const{x:r,y:o,platform:i,rects:l,elements:a,strategy:s}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:d=!1,padding:m=0}=e,g=v(m),h=a[d?"floating"===u?"reference":"floating":u],y=x(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(h)))||n?h:h.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:f,strategy:s})),b=x(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===u?p(p({},l.floating),{},{x:r,y:o}):l.reference,offsetParent:await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),strategy:s}):l[u]);return{top:y.top-b.top+g.top,bottom:b.bottom-y.bottom+g.bottom,left:y.left-b.left+g.left,right:b.right-y.right+g.right}}const A=Math.min,R=Math.max;function P(t,e,n){return R(t,A(e,n))}const j={left:"right",right:"left",bottom:"top",top:"bottom"};function D(t){return t.replace(/left|right|bottom|top/g,t=>j[t])}function L(t,e,n){void 0===n&&(n=!1);const r=h(t),o=y(t),i=b(o);let l="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=D(l)),{main:l,cross:D(l)}}const E={start:"end",end:"start"};function T(t){return t.replace(/start|end/g,t=>E[t])}const S=["top","right","bottom","left"],C=S.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);function k(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function H(t){return S.some(e=>t[e]>=0)}function W(t){return"x"===t?"y":"x"}function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach(function(e){V(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function V(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function B(t){if(null==t)return window;if(!z(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function F(t){return B(t).getComputedStyle(t)}function U(t){return z(t)?"":t?(t.nodeName||"").toLowerCase():""}function _(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function X(t){return t instanceof B(t).HTMLElement}function Y(t){return t instanceof B(t).Element}function q(t){return"undefined"!=typeof ShadowRoot&&(t instanceof B(t).ShadowRoot||t instanceof ShadowRoot)}function G(t){const{overflow:e,overflowX:n,overflowY:r}=F(t);return/auto|scroll|overlay|hidden/.test(e+r+n)}function J(t){return["table","td","th"].includes(U(t))}function K(t){const e=/firefox/i.test(_()),n=F(t);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter}function Q(){return!/^((?!chrome|android).)*safari/i.test(_())}const Z=Math.min,tt=Math.max,et=Math.round;function nt(t,e,n){var r,o,i,l;void 0===e&&(e=!1),void 0===n&&(n=!1);const a=t.getBoundingClientRect();let s=1,c=1;e&&X(t)&&(s=t.offsetWidth>0&&et(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&et(a.height)/t.offsetHeight||1);const f=Y(t)?B(t):window,u=!Q()&&n,d=(a.left+(u&&null!=(r=null==(o=f.visualViewport)?void 0:o.offsetLeft)?r:0))/s,p=(a.top+(u&&null!=(i=null==(l=f.visualViewport)?void 0:l.offsetTop)?i:0))/c,m=a.width/s,g=a.height/c;return{width:m,height:g,top:p,right:d+m,bottom:p+g,left:d,x:d,y:p}}function rt(t){return(e=t,(e instanceof B(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function ot(t){return Y(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function it(t){return nt(rt(t)).left+ot(t).scrollLeft}function lt(t,e,n){const r=X(e),o=rt(e),i=nt(t,r&&function(t){const e=nt(t);return et(e.width)!==t.offsetWidth||et(e.height)!==t.offsetHeight}(e),"fixed"===n);let l={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==U(e)||G(o))&&(l=ot(e)),X(e)){const t=nt(e,!0);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}else o&&(a.x=it(o));return{x:i.left+l.scrollLeft-a.x,y:i.top+l.scrollTop-a.y,width:i.width,height:i.height}}function at(t){return"html"===U(t)?t:t.assignedSlot||t.parentNode||(q(t)?t.host:null)||rt(t)}function st(t){return X(t)&&"fixed"!==getComputedStyle(t).position?t.offsetParent:null}function ct(t){const e=B(t);let n=st(t);for(;n&&J(n)&&"static"===getComputedStyle(n).position;)n=st(n);return n&&("html"===U(n)||"body"===U(n)&&"static"===getComputedStyle(n).position&&!K(n))?e:n||function(t){let e=at(t);for(q(e)&&(e=e.host);X(e)&&!["html","body"].includes(U(e));){if(K(e))return e;e=e.parentNode}return null}(t)||e}function ft(t){if(X(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=nt(t);return{width:e.width,height:e.height}}function ut(t){const e=at(t);return["html","body","#document"].includes(U(e))?t.ownerDocument.body:X(e)&&G(e)?e:ut(e)}function dt(t,e){var n;void 0===e&&(e=[]);const r=ut(t),o=r===(null==(n=t.ownerDocument)?void 0:n.body),i=B(r),l=o?[i].concat(i.visualViewport||[],G(r)?r:[]):r,a=e.concat(l);return o?a:a.concat(dt(l))}function pt(t,e,n){return"viewport"===e?x(function(t,e){const n=B(t),r=rt(t),o=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,a=0,s=0;if(o){i=o.width,l=o.height;const t=Q();(t||!t&&"fixed"===e)&&(a=o.offsetLeft,s=o.offsetTop)}return{width:i,height:l,x:a,y:s}}(t,n)):Y(e)?function(t,e){const n=nt(t,!1,"fixed"===e),r=n.top+t.clientTop,o=n.left+t.clientLeft;return{top:r,left:o,x:o,y:r,right:o+t.clientWidth,bottom:r+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):x(function(t){var e;const n=rt(t),r=ot(t),o=null==(e=t.ownerDocument)?void 0:e.body,i=tt(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=tt(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let a=-r.scrollLeft+it(t);const s=-r.scrollTop;return"rtl"===F(o||n).direction&&(a+=tt(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:l,x:a,y:s}}(rt(t)))}function mt(t){const e=dt(t),n=["absolute","fixed"].includes(F(t).position)&&X(t)?ct(t):t;return Y(n)?e.filter(t=>Y(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&q(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&"body"!==U(t)):[]}const gt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[].concat(N("clippingAncestors"===n?mt(e):[].concat(n)),[r]),l=i[0],a=i.reduce((t,n)=>{const r=pt(e,n,o);return t.top=tt(r.top,t.top),t.right=Z(r.right,t.right),t.bottom=Z(r.bottom,t.bottom),t.left=tt(r.left,t.left),t},pt(e,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const o=X(n),i=rt(n);if(n===i)return e;let l={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((o||!o&&"fixed"!==r)&&(("body"!==U(n)||G(i))&&(l=ot(n)),X(n))){const t=nt(n,!0);a.x=t.x+n.clientLeft,a.y=t.y+n.clientTop}return M(M({},e),{},{x:e.x-l.scrollLeft+a.x,y:e.y-l.scrollTop+a.y})},isElement:Y,getDimensions:ft,getOffsetParent:ct,getDocumentElement:rt,getElementRects:t=>{let{reference:e,floating:n,strategy:r}=t;return{reference:lt(e,ct(n),r),floating:M(M({},ft(n)),{},{x:0,y:0})}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===F(t).direction};const ht=(t,e,n)=>(async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:l}=n,a=await(null==l.isRTL?void 0:l.isRTL(e));let s=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:c,y:f}=w(s,r,a),u=r,d={},m=0;for(let n=0;n<i.length;n++){const{name:g,fn:h}=i[n],{x:y,y:b,data:v,reset:x}=await h({x:c,y:f,initialPlacement:r,placement:u,strategy:o,middlewareData:d,rects:s,platform:l,elements:{reference:t,floating:e}});c=null!=y?y:c,f=null!=b?b:f,d=p(p({},d),{},{[g]:p(p({},d[g]),v)}),x&&m<=50&&(m++,"object"==typeof x&&(x.placement&&(u=x.placement),x.rects&&(s=!0===x.rects?await l.getElementRects({reference:t,floating:e,strategy:o}):x.rects),({x:c,y:f}=w(s,u,a))),n=-1)}return{x:c,y:f,placement:u,strategy:o,middlewareData:d}})(t,e,M({platform:gt},n)),yt=t=>({name:"offset",options:t,fn:async e=>function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,o=await async function(t,e){const{placement:n,platform:r,elements:o}=t,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),l=g(n),a=h(n),s="x"===y(n),c=["left","top"].includes(l)?-1:1,f=i&&s?-1:1,u="function"==typeof e?e(t):e;let{mainAxis:d,crossAxis:m,alignmentAxis:b}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:p({mainAxis:0,crossAxis:0,alignmentAxis:null},u);return a&&"number"==typeof b&&(m="end"===a?-1*b:b),s?{x:m*f,y:d*c}:{x:d*c,y:m*f}}(e,t);return{x:n+o.x,y:r+o.y,data:o}}}}(e=>{var n;let r;if(null!=(null===(n=e.middlewareData.flip)||void 0===n?void 0:n.overflows[0])&&null!=t&&"object"==typeof t&&(r=bt(e.placement,e.initialPlacement,t)),!t)return 0;return"function"==typeof t?t(Object.assign(Object.assign({},e.rects),{placement:e.placement})):null!=r?r:t}).fn(e)}),bt=(t,e,n)=>{const r=e.split("-")[0],o=t.split("-")[0],i=e.split("-")[1],l=t.split("-")[1];return("right"===r||"left"===r)&&r===o&&i!==l||("top"===r||"bottom"===r)&&r===o&&i!==l?{mainAxis:n&&"object"==typeof n&&n.mainAxis?n.mainAxis:0,crossAxis:n&&"object"==typeof n&&n.crossAxis?-n.crossAxis:0}:n};function wt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if("function"==typeof t&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&"object"==typeof t){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;0!=r--;)if(!wt(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!t.$$typeof)&&!wt(t[n],e[n]))return!1}return!0}return t!=t&&e!=e}t.D=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:s={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}}}=t,c=u(t,a),f={x:n,y:r},d=await O(e,c),m=y(g(o)),h=W(m);let b=f[m],w=f[h];if(i){const t="y"===m?"bottom":"right";b=P(b+d["y"===m?"top":"left"],b,b-d[t])}if(l){const t="y"===h?"bottom":"right";w=P(w+d["y"===h?"top":"left"],w,w-d[t])}const v=s.fn(p(p({},e),{},{[m]:b,[h]:w}));return p(p({},v),{},{data:{x:v.x-n,y:v.y-r}})}}},t.E=function(t){return void 0===t&&(t={}),{name:"inline",options:t,async fn(e){var n;const{placement:r,elements:o,rects:i,platform:l,strategy:a}=e,{padding:s=2,x:f,y:u}=t,d=x(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:i.reference,offsetParent:await(null==l.getOffsetParent?void 0:l.getOffsetParent(o.floating)),strategy:a}):i.reference),p=null!=(n=await(null==l.getClientRects?void 0:l.getClientRects(o.reference)))?n:[],m=v(s),h=await l.getElementRects({reference:{getBoundingClientRect:function(){var t;if(2===p.length&&p[0].left>p[1].right&&null!=f&&null!=u)return null!=(t=p.find(t=>f>t.left-m.left&&f<t.right+m.right&&u>t.top-m.top&&u<t.bottom+m.bottom))?t:d;if(p.length>=2){if("x"===y(r)){const t=p[0],e=p[p.length-1],n="top"===g(r),o=t.top,i=e.bottom,l=n?t.left:e.left,a=n?t.right:e.right;return{top:o,bottom:i,left:l,right:a,width:a-l,height:i-o,x:l,y:o}}const t="left"===g(r),e=R.apply(void 0,c(p.map(t=>t.right))),n=A.apply(void 0,c(p.map(t=>t.left))),o=p.filter(r=>t?r.left===n:r.right===e),i=o[0].top,l=o[o.length-1].bottom;return{top:i,bottom:l,left:n,right:e,width:e-n,height:l-i,x:n,y:i}}return d}},floating:o.floating,strategy:a});return i.reference.x!==h.reference.x||i.reference.y!==h.reference.y||i.reference.width!==h.reference.width||i.reference.height!==h.reference.height?{reset:{rects:h}}:{}}}},t.L=function(t){return void 0===t&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:l}=e,{offset:a=0,mainAxis:s=!0,crossAxis:c=!0}=t,f={x:n,y:r},u=y(o),d=W(u);let m=f[u],h=f[d];const b="function"==typeof a?a(p(p({},i),{},{placement:o})):a,w="number"==typeof b?{mainAxis:b,crossAxis:0}:p({mainAxis:0,crossAxis:0},b);if(s){const t="y"===u?"height":"width",e=i.reference[u]-i.floating[t]+w.mainAxis,n=i.reference[u]+i.reference[t]-w.mainAxis;m<e?m=e:m>n&&(m=n)}if(c){var v,x,O,A;const t="y"===u?"width":"height",e=["top","left"].includes(g(o)),n=i.reference[d]-i.floating[t]+(e&&null!=(v=null==(x=l.offset)?void 0:x[d])?v:0)+(e?0:w.crossAxis),r=i.reference[d]+i.reference[t]+(e?0:null!=(O=null==(A=l.offset)?void 0:A[d])?O:0)-(e?w.crossAxis:0);h<n?h=n:h>r&&(h=r)}return{[u]:m,[d]:h}}}},t.N=function(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:l=!0,animationFrame:a=!1}=r,s=o&&!a,c=i&&!a,f=s||c?[].concat(N(Y(t)?dt(t):[]),N(dt(e))):[];f.forEach(t=>{s&&t.addEventListener("scroll",n,{passive:!0}),c&&t.addEventListener("resize",n)});let u,d=null;l&&(d=new ResizeObserver(n),Y(t)&&!a&&d.observe(t),d.observe(e));let p=a?nt(t):null;return a&&function e(){const r=nt(t);!p||r.x===p.x&&r.y===p.y&&r.width===p.width&&r.height===p.height||n(),p=r,u=requestAnimationFrame(e)}(),l||n(),()=>{var t;f.forEach(t=>{s&&t.removeEventListener("scroll",n),c&&t.removeEventListener("resize",n)}),null==(t=d)||t.disconnect(),d=null,a&&cancelAnimationFrame(u)}},t.P=function(t){let e=void 0===t?{}:t,{strategy:n="referenceHidden"}=e,r=u(e,l);return{name:"hide",async fn(t){const{rects:e}=t;switch(n){case"referenceHidden":{const n=k(await O(t,p(p({},r),{},{elementContext:"reference"})),e.reference);return{data:{referenceHiddenOffsets:n,referenceHidden:H(n)}}}case"escaped":{const n=k(await O(t,p(p({},r),{},{altBoundary:!0})),e.floating);return{data:{escapedOffsets:n,escaped:H(n)}}}default:return{}}}}},t.b=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:o,rects:l,initialPlacement:a,platform:s,elements:f}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",flipAlignment:y=!0}=t,b=u(t,i),w=g(r),v=m||(w!==a&&y?function(t){const e=D(t);return[T(t),e,T(e)]}(a):[D(a)]),x=[a].concat(c(v)),A=await O(e,b),R=[];let P=(null==(n=o.flip)?void 0:n.overflows)||[];if(d&&R.push(A[w]),p){const{main:t,cross:e}=L(r,l,await(null==s.isRTL?void 0:s.isRTL(f.floating)));R.push(A[t],A[e])}if(P=[].concat(c(P),[{placement:r,overflows:R}]),!R.every(t=>t<=0)){var j,E;const t=(null!=(j=null==(E=o.flip)?void 0:E.index)?j:0)+1,e=x[t];if(e)return{data:{index:t,overflows:P},reset:{placement:e}};let n="bottom";switch(h){case"bestFit":{var S;const t=null==(S=P.map(t=>[t,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:S[0].placement;t&&(n=t);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},t.k=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:o,elements:i}=e,{apply:l}=t,a=u(t,s),c=await O(e,a),f=g(n),d=h(n);let m,y;"top"===f||"bottom"===f?(m=f,y=d===(await(null==o.isRTL?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(y=f,m="end"===d?"top":"bottom");const b=R(c.left,0),w=R(c.right,0),v=R(c.top,0),x=R(c.bottom,0),A={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(0!==v||0!==x?v+x:R(c.top,c.bottom)):c[m]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(0!==b||0!==w?b+w:R(c.left,c.right)):c[y])},P=await o.getDimensions(i.floating);null==l||l(p(p({},e),A));const j=await o.getDimensions(i.floating);return P.width!==j.width||P.height!==j.height?{reset:{rects:!0}}:{}}}},t.m=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=null!=t?t:{},{x:o,y:i,placement:l,rects:a,platform:s}=e;if(null==n)return{};const c=v(r),f={x:o,y:i},u=y(l),d=h(l),p=b(u),m=await s.getDimensions(n),g="y"===u?"top":"left",w="y"===u?"bottom":"right",x=a.reference[p]+a.reference[u]-f[u]-a.floating[p],O=f[u]-a.reference[u],A=await(null==s.getOffsetParent?void 0:s.getOffsetParent(n));let R=A?"y"===u?A.clientHeight||0:A.clientWidth||0:0;0===R&&(R=a.floating[p]);const j=x/2-O/2,D=c[g],L=R-m[p]-c[w],E=R/2-m[p]/2+j,T=P(D,E,L),S=("start"===d?c[g]:c[w])>0&&E!==T&&a.reference[p]<=a.floating[p];return{[u]:f[u]-(S?E<D?D-E:L-E:0),data:{[u]:T,centerOffset:E-T}}}}),t.offset=yt,t.s=O,t.useFloating=function({middleware:t,placement:o,strategy:i,onPosition:l,whileElementsMounted:a}){["top","top-start","top-end","top-start-corner","top-end-corner","start","start-top","start-bottom","start-top-corner","start-bottom-corner","bottom","bottom-start","bottom-end","bottom-start-corner","bottom-end-corner","end","end-top","end-bottom","end-top-corner","end-bottom-corner"].includes(o)||(o="bottom");const s=e.useRef(null),c=e.useRef(null),f=function(t){const n=e.useRef(t);return e.useLayoutEffect(()=>{n.current=t}),n}(a),u=e.useRef(null),d=e.useRef(!1),{direction:p}=n.useUser(),[m,g]=e.useState({x:null,y:null,strategy:null!=i?i:"absolute",placement:"bottom",middlewareData:{}}),h=e.useRef(m),[y,b]=e.useState(t);wt(null==y?void 0:y.map(({options:t})=>t),null==t?void 0:t.map(({options:t})=>t))||b(t);const w=e.useCallback(()=>{if(!s.current||!c.current)return;const t=((t,e)=>{const n=t.split("-")[0],r=t.split("-")[1];if(null==t.split("-")[2])return{placement:t,offset:void 0};const o=["top-start","start-top","bottom-start","start-bottom","top-end","end-top","bottom-end","end-bottom"].filter(t=>t===`${n}-${r}`)[0];return"start"==r?{placement:o,offset:{crossAxis:-e.offsetWidth}}:"end"==r?{placement:o,offset:{crossAxis:e.offsetWidth}}:"top"==r?{placement:o,offset:{crossAxis:-e.offsetHeight}}:{placement:o,offset:{crossAxis:e.offsetHeight}}})(o,c.current),e=((t,e)=>{const n=t.split("-")[0],o=t.split("-")[1],i=r.normalizePosition(n,e);let l,a;o&&(l={top:"start",bottom:"end"},a=o.replace(/top|bottom/g,t=>l[t]));const s=["top","right","bottom","left","top-start","right-start","bottom-start","left-start","top-end","right-end","bottom-end","left-end"].filter(t=>a&&t===`${i}-${a}`||!a&&t===`${i}`)[0];return s||"bottom"})(t.placement,p),n=null==y?void 0:y.map(e=>{var n,r,o;if("offset"===e.name){if("function"==typeof e.options)return null==t.offset?e:yt(t.offset);const i="number"==typeof e.options?{mainAxis:e.options,crossAxis:0}:e.options;return yt({mainAxis:null!==(n=i&&i.mainAxis)&&void 0!==n?n:0,crossAxis:(null!==(r=t.offset&&t.offset.crossAxis)&&void 0!==r?r:0)+(null!==(o=i&&i.crossAxis)&&void 0!==o?o:0)})}return e});ht(s.current,c.current,{middleware:n,placement:e,strategy:i}).then(t=>{var e,i,a,s,c,f,u;if(d.current){if(t.placement!==h.current.placement||t.x!==h.current.x||t.y!==h.current.y||(null===(e=t.middlewareData.arrow)||void 0===e?void 0:e.x)!=(null===(i=h.current.middlewareData.arrow)||void 0===i?void 0:i.x)||(null===(a=t.middlewareData.arrow)||void 0===a?void 0:a.y)!=(null===(s=h.current.middlewareData.arrow)||void 0===s?void 0:s.y)||(null===(c=t.middlewareData.arrow)||void 0===c?void 0:c.centerOffset)!=(null===(f=h.current.middlewareData.arrow)||void 0===f?void 0:f.centerOffset)){const e=null===(u=null==n?void 0:n.find(t=>"offset"===t.name))||void 0===u?void 0:u.options,i=((t,e)=>{const n=t.split("-")[0];if("top"===n||"bottom"===n)return t;const o=t.split("-")[1],i=r.reverseNormalizePosition(n,e),l={start:"top",end:"bottom"},a=null!=o?o.replace(/start|end/g,t=>l[t]):null,s=["top","top-start","top-end","end","end-top","end-bottom","bottom-start","bottom-end","bottom","start","start-top","start-bottom"].filter(t=>a&&t===`${i}-${a}`||!a&&t===`${i}`)[0];return s||"bottom"})(t.placement,p),a=t.middlewareData.offset,s={placement:i,origPlacement:o,x:t.x,y:t.y,arrow:t.middlewareData.arrow,offset:a,origOffset:e};null==l||l(s)}(t=>{h.current=t,g(t)})(t)}})},[y,o,p,i,l]);e.useLayoutEffect(()=>{d.current&&w()},[w]),e.useLayoutEffect(()=>(d.current=!0,()=>{d.current=!1}),[]);const v=e.useCallback(()=>{if("function"==typeof u.current&&(u.current(),u.current=null),s.current&&c.current)if(f.current){const t=f.current(s.current,c.current,w);u.current=t}else w()},[w,f]),x=e.useCallback(t=>{s.current=t,v()},[v]),O=e.useCallback(t=>{c.current=t,v()},[v]),A=e.useMemo(()=>({reference:s,floating:c}),[]);return e.useMemo(()=>Object.assign(Object.assign({},m),{update:w,refs:A,reference:x,floating:O}),[m,w,A,x,O])},t.v=function(t){return void 0===t&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i,l,a;const{x:s,y:f,rects:d,middlewareData:p,placement:m,platform:y,elements:b}=e,{alignment:w=null,allowedPlacements:v=C,autoAlignment:x=!0}=t,A=u(t,o),R=function(t,e,n){return(t?[].concat(c(n.filter(e=>h(e)===t)),c(n.filter(e=>h(e)!==t))):n.filter(t=>g(t)===t)).filter(n=>!t||h(n)===t||!!e&&T(n)!==n)}(w,x,v),P=await O(e,A),j=null!=(n=null==(r=p.autoPlacement)?void 0:r.index)?n:0,D=R[j];if(null==D)return{};const{main:E,cross:S}=L(D,d,await(null==y.isRTL?void 0:y.isRTL(b.floating)));if(m!==D)return{x:s,y:f,reset:{placement:R[0]}};const k=[P[g(D)],P[E],P[S]],H=[].concat(c(null!=(i=null==(l=p.autoPlacement)?void 0:l.overflows)?i:[]),[{placement:D,overflows:k}]),W=R[j+1];if(W)return{data:{index:j+1,overflows:H},reset:{placement:W}};const $=H.slice().sort((t,e)=>t.overflows[0]-e.overflows[0]),M=null==(a=$.find(t=>{let{overflows:e}=t;return e.every(t=>t<=0)}))?void 0:a.placement,V=null!=M?M:$[0].placement;return V!==m?{data:{index:j+1,overflows:H},reset:{placement:V}}:{}}}}});
//# sourceMappingURL=index-4f4526ef.js.map
