define(["exports","preact/jsx-runtime","preact"],function(t,e,n){"use strict";class s{static getChildMapping(t,e=new Map,i=(()=>{})){const a=Symbol();let l={};0!==e.size&&(l=s._getMappedDeletions(t,e,a));const o=t.reduce((t,s)=>{if(l[s.key]){const i=l[s.key];for(const s of i){const i=e.get(s);t.set(s,n.cloneElement(i,{in:!1}))}const a=e.get(s.key);t.set(s.key,n.cloneElement(s,{in:a.props.in}))}else{const e=n.cloneElement(s,{onExited:i.bind(null,s),in:!0});t.set(s.key,e)}return t},new Map);for(const t of l[a]||[]){const s=e.get(t);o.set(t,n.cloneElement(s,{in:!1}))}return o}static _getMappedDeletions(t,e,n){const s=new Set(t.map(t=>t.key));return[...e.keys()].reduce((t,e)=>{if(s.has(e))t[e]=t[n],delete t[n];else{const s=t[n]?[...t[n],e]:[e];t[n]=s}return t},{})}}class i extends n.Component{constructor(t){super(t),this._handleExited=(t,e,n)=>{var i,a;const{children:l}=this.props;s.getChildMapping(l).has(t.key)||(null===(a=(i=t.props).onExited)||void 0===a||a.call(i,e,n),this._mounted&&this.setState(e=>{const n=new Map(e.childMapping);return n.delete(t.key),{childMapping:n}}))},this.state={childMapping:void 0,handleExited:this._handleExited},this._mounted=!1}static getDerivedStateFromProps(t,e){const{childMapping:n,handleExited:i}=e;return{childMapping:s.getChildMapping(t.children,n,i)}}componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1}render(){const t=this.props.elementType,{childMapping:n}=this.state,s=[...n.values()];return e.jsx(t,{children:s})}}i.defaultProps={elementType:"div"};class a extends n.Component{constructor(t){let e;super(t),e=t.in?"entering":null,this._appearStatus=e,this.state={status:"exited"},this._nextCallback=null}componentDidMount(){this._updateStatus(this._appearStatus)}componentDidUpdate(t){let e=null;if(t!==this.props){const{status:t}=this.state;this.props.in?"entering"!==t&&"entered"!==t&&(e="entering"):"entering"!==t&&"entered"!==t||(e="exiting")}this._updateStatus(e)}componentWillUnmount(){this._cancelNextCallback()}render(t){return null==t?void 0:t.children}_setNextCallback(t){let e=!0;return this._nextCallback=(...n)=>{e&&(e=!1,this._nextCallback=null,t(...n))},this._nextCallback.cancel=()=>{e=!1},this._nextCallback}_cancelNextCallback(){var t,e;null===(e=null===(t=this._nextCallback)||void 0===t?void 0:t.cancel)||void 0===e||e.call(t),this._nextCallback=null}_updateStatus(t){null!=t&&(this._cancelNextCallback(),"entering"===t?this._performEnter(this.base):this._performExit(this.base))}_performEnter(t){var e,n;null===(n=(e=this.props).onEnter)||void 0===n||n.call(e,t,this.props.metadata),this.setState({status:"entering"},()=>{var e,n;null===(n=(e=this.props).onEntering)||void 0===n||n.call(e,t,this._setNextCallback(()=>{this.setState({status:"entered"},()=>{var e,n;null===(n=(e=this.props).onEntered)||void 0===n||n.call(e,t,this.props.metadata)})}),this.props.metadata)})}_performExit(t){var e,n;null===(n=(e=this.props).onExit)||void 0===n||n.call(e,t,this.props.metadata),this.setState({status:"exiting"},()=>{var e,n;null===(n=(e=this.props).onExiting)||void 0===n||n.call(e,t,this._setNextCallback(()=>{this.setState({status:"exited"},()=>{var e,n;null===(n=(e=this.props).onExited)||void 0===n||n.call(e,t,this.props.metadata)})}),this.props.metadata)})}}t.Transition=a,t.TransitionGroup=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=PRIVATE_TransitionGroup.js.map
