define(["exports","./tslib.es6-6a195797","preact/jsx-runtime","preact","preact/hooks","css!./UNSAFE_RatingGauge.css","./utils/UNSAFE_classNames","./classNames-429bf434","./hooks/UNSAFE_useUser","./hooks/UNSAFE_useTooltip","./utils/UNSAFE_mergeProps","./hooks/UNSAFE_useTabbableMode","./UNSAFE_Environment","./UNSAFE_Layer","preact/compat","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-31eefce3","./index-4f4526ef","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./utils/UNSAFE_arrayUtils","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-5d80cd95"],function(e,s,t,o,a,i,l,r,n,c,d,u,b,h,p,m,x,v,y,g,_,f,j,w,A,R,U,D,E){"use strict";const k=({isSelected:e,isDisabled:s,isReadOnly:o,color:a})=>{const i=`${e?"selected":"unselected"}${s&&"Disabled"||o&&"Readonly"||""}`,l=N[`${i}Color`],n=N[`${i}BorderColor`];return t.jsx("svg",Object.assign({viewBox:"0 0 36 36",height:"100%",width:"100%",class:r.classNames([N.base,`oj-c-rating-gauge-${a}`])},{children:t.jsxs("g",{children:[t.jsx("path",{class:l,d:"m18 1 5.0061 11.9524 12.9939 1.0344-9.9 8.4215 3.0246 12.5917-11.1246-6.7476-11.12461 6.7476 3.02461-12.5917-9.9-8.4215 12.9939-1.0344z"}),t.jsx("path",{class:n,d:"m23.0061 12.9524-5.0061-11.9524-5.0061 11.9524-12.9939 1.0344 9.9 8.4215-3.02461 12.5917 11.12461-6.7476 11.1246 6.7476-3.0246-12.5917 9.9-8.4215zm10.5043 1.8394-8.5262 7.2528 2.6077 10.8562-9.5919-5.818-9.59192 5.818 2.60772-10.8562-8.52615-7.2528 11.19115-.891 4.3192-10.31227 4.3192 10.31227z"})]})}))},N={base:"_1paq9x7",selectedColor:"_68gu16",selectedBorderColor:"wp2fc0",unselectedColor:"_157b0ts",unselectedBorderColor:"_1vjldx4",selectedReadonlyColor:"_112ir2b",selectedReadonlyBorderColor:"_15vqgfe",unselectedReadonlyColor:"_1jwj2sc",unselectedReadonlyBorderColor:"_40fuvd",selectedDisabledColor:"_1f3lisq",unselectedDisabledColor:"_62wcd1",selectedDisabledBorderColor:"hog39u",unselectedDisabledBorderColor:"_1n0jrti"},C=({fillRatio:e,isDisabled:s,isReadonly:a,color:i})=>{const{direction:l}=n.useUser(),r="rtl"===l;return 1===e||0===e?t.jsx(k,{isSelected:1===e,isDisabled:s,isReadOnly:a,color:i}):t.jsxs(o.Fragment,{children:[t.jsx("div",Object.assign({class:F.base,style:{clipPath:`inset(0% ${r?100*(1-e):0}% 0% ${r?0:100*e}%)`}},{children:t.jsx(k,{isSelected:!1,isDisabled:s,isReadOnly:a,color:i})})),t.jsx("div",Object.assign({class:F.base,style:{clipPath:`inset(0% ${r?0:100*(1-e)}% 0% ${r?100*(1-e):0}%)`}},{children:t.jsx(k,{isSelected:!0,isDisabled:s,isReadOnly:a,color:i})}))]})},F={base:"fbqsvm"};function S(e,s,t,o,a){const i=o.current;if(!i||0===i.width)return-1;const l=e-i.x,r=s*(a?i.width-l:l)/i.width/t;return r<.5?0:Math.ceil(r)*t}function M(e){if(!e)return{width:0,x:0};const s=e.getBoundingClientRect();return{width:Math.round(s.width),x:Math.round(s.x+window.scrollX)}}const B={base:"_1rp0bsd",interactive:"hg95e0",lg:"enz13y",md:"_1c1kahj",sm:"cgj6bd",item:"_1mwtbw1"};e.RatingGauge=function(e){var{max:i=5,value:l=0,size:b="md",color:h="neutral",step:p=1,isReadonly:m,isDisabled:x}=e,v=s.__rest(e,["max","value","size","color","step","isReadonly","isDisabled"]);const y=a.useRef(null),g=a.useRef(M(null)),_=!m&&!x;a.useEffect(()=>{g.current=M(y.current)},[b,i]);const f=((e,s,t,o,i,l,r,c)=>{const d=a.useRef(),{direction:u}=n.useUser();if(!l)return{};const b="rtl"===u,h=e=>{null==c||c({value:e}),d.current=e},p=e=>{e.preventDefault(),e.stopPropagation()};return{onPointerUp:t=>{const o=S(t.pageX,e,s,i,b);-1!==o&&(null==r||r({value:o}))},onBlur:()=>{null==r||r({value:t})},onPointerMove:t=>{const o=S(t.pageX,e,s,i,b);-1!==o&&o!=d.current&&h(o)},onKeyUp:s=>{switch(s.key){case"Enter":null==r||r({value:t});break;case"Tab":h(t);break;case"Home":h(0);break;case"End":h(e)}p(s)},onKeyDown:o=>{switch(o.key){case"Tab":return;case"ArrowDown":h(Math.max(0,t-s));break;case"ArrowUp":h(Math.min(e,t+s));break;case"ArrowLeft":{const o=b?Math.min(e,t+s):Math.max(0,t-s);h(o);break}case"ArrowRight":{const o=b?Math.max(0,t-s):Math.min(e,t+s);h(o);break}}p(o)},onPointerLeave:()=>{h(void 0)},onPointerEnter:()=>{i.current=M(o.current)}}})(i,p,l,y,g,_,v.onCommit,v.onInput),{tooltipContent:j,tooltipProps:w}=function({max:e,value:s,isReadonly:t,isDisabled:o,tooltip:i,datatip:l,ariaDescribedBy:r,width:n}){const[d,u]=a.useState(!1),b=t&&!o?"tooltip":"datatip",h=o||!("tooltip"===b&&i||"datatip"===b&&l),p=Math.max(1,Math.ceil(s)),m="tooltip"===b?0:(p-Math.ceil(e/2))*n/e,{tooltipContent:x,tooltipProps:v}=c.useTooltipControlled({text:"tooltip"===b?i:l,isOpen:d,anchor:{x:"element",y:"element"},position:"bottom",offset:{mainAxis:8,crossAxis:m},isDisabled:h,onToggle:({value:e})=>u(e),variant:b});return v["aria-describedby"]=[r,v["aria-describedby"]].filter(Boolean).join(" "),{tooltipContent:x,tooltipProps:v}}({max:i,value:l,isReadonly:m,isDisabled:x,tooltip:v.tooltip,datatip:v.datatip,width:g.current.width,ariaDescribedBy:v.ariaDescribedBy}),A=d.mergeProps(f,w),R=(e=>e.accessibleLabel?e.accessibleLabel:e.tooltip&&e.isReadonly&&!e.isDisabled?e.tooltip:void 0)({accessibleLabel:v.accessibleLabel,tooltip:v.tooltip,isReadonly:m,isDisabled:x}),{isTabbable:U}=u.useTabbableMode();return t.jsxs(o.Fragment,{children:[t.jsx("div",Object.assign({ref:y,class:r.classNames([B.base,_?B.interactive:void 0]),"aria-label":R,role:"slider","aria-valuemin":"0","aria-valuenow":l,"aria-valuemax":i,"aria-valuetext":l,"aria-labelledby":v.ariaLabelledBy,tabIndex:U&&!x?0:-1,"aria-disabled":x?"true":void 0,"aria-readonly":m&&!x?"true":void 0},A,{children:[...Array(i)].map((e,s)=>{const o=Math.min(Math.max(0,l-s),1);return t.jsx("div",Object.assign({className:r.classNames([B[b],B.item])},{children:t.jsx(C,{fillRatio:o,isDisabled:x,isReadonly:m,color:h})}))})})),j]})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_RatingGauge.js.map
