define(["exports","preact/jsx-runtime","preact/hooks","preact/compat","./index-4f4526ef","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./hooks/UNSAFE_useUser"],function(t,e,o,n,r,i,s,l){"use strict";const c=n.forwardRef(({},t)=>e.jsxs("div",Object.assign({ref:t},{children:[" ",e.jsx("div",{})," "]})));const a=n.forwardRef(({children:t,onClickOutside:n,placement:a="bottom",anchorRef:u,offsetValue:f,class:d,tail:p="none",flipOptions:m={mainAxis:!0,crossAxis:!1},shiftOptions:b={mainAxis:!0,crossAxis:!1},onPosition:x},h)=>{const g=o.useRef(null),[A,v]=o.useState(null);o.useLayoutEffect(()=>{v(u.current)},[]),u.current!==A&&v(u.current);const{direction:y}=l.useUser(),O="rtl"===y,R=o.useCallback(t=>{!function(t,e,o,n,r){var i,s;if("simple"===n&&t.arrow){const{x:n,y:l,centerOffset:c}=t.arrow,a=o.current,u=7,f=6,d=null===(i=o.current)||void 0===i?void 0:i.querySelector("div"),p=5,m=5,b={position:"absolute",width:"0px",height:"0px"};let x=0,h=0;const g=e.current,A=void 0===(null==g?void 0:g.x)&&void 0===(null==g?void 0:g.y);A&&(x=Math.round(g.getBoundingClientRect().height),h=Math.round(null===(s=e.current)||void 0===s?void 0:s.getBoundingClientRect().width));const v=A?Math.abs(c)>=x/2-u/2:["start-top-corner","start-bottom-corner","end-top-corner","end-bottom-corner"].includes(t.origPlacement),y=A?Math.abs(c)>=h/2-u/2:["top-start-corner","top-end-corner","bottom-start-corner","bottom-end-corner"].includes(t.origPlacement),O=0===c,R=c>0;function k(t){const e=t?f:u;j({borderTop:`${P(e)} solid rgba(var(--oj-c-PRIVATE-DO-NOT-USE-palette-neutral-rgb-90), 0.1)`,borderRight:T(e),borderLeft:T(e)});const o=t?m:p;w({borderTop:`${P(o)} solid var(--oj-c-PRIVATE-DO-NOT-USE-popup-bg-color)`,borderRight:`${T(o)}`,borderLeft:`${T(o)}`})}function E(t,e){Object.assign(null==e?void 0:e.style,t)}function j(t){E(t,a)}function w(t){E(t,d)}function C(t){return`rotate(${45*t}deg)`}function P(t){return`${t}px`}function T(t){return`${P(t)} solid transparent`}switch(E(b,a),E(b,d),k(v||y),t.placement.split("-")[0]){case"top":U();break;case"end":r?S():$();break;case"bottom":M();break;case"start":r?$():S()}function U(){null!=n&&(y?(j({top:"",bottom:P(2-u),left:P(n+(R?5:-5)),transform:C(R?5:3)}),L()):(j({top:"",bottom:P(-u),left:P(O?n:n+(R?1:-1)),transform:C(0)}),N()))}function $(){null!=l&&(v?(j({top:P(l+(R?2:-2)),right:"",left:P(-u-1),transform:C(R?7:5)}),L()):(j({top:P(O?l:l+(R?-2:2)),right:"",left:P(1.5*-u),transform:C(2)}),N()))}function M(){null!=n&&(y?(j({top:P(3-u),bottom:"",left:P(n+(R?4:-4)),transform:C(R?2:6)}),w({top:P(-p),left:P((R?1:-1)-p)})):(j({top:P(-u),bottom:"",left:P(O?n:n+(R?1:-1)),transform:C(4)}),N()))}function S(){null!=l&&(v?(j({top:P(l+(R?2:-2)),right:P(-u-1),left:"",transform:C(R?1:3)}),w({top:P(-p),left:P((R?-2:2)-p)})):(j({top:P(O?l:l+(R?-2:2)),right:P(1.5*-u),left:"",transform:C(6)}),N()))}function L(){w({top:P(-p),left:P((R?2:-2)-p)})}function N(){w({top:P(-p-2),left:P(-p)})}}}(t,u,g,p,O),null==x||x(t)},[a,u,g,p,x]),{x:k,y:E,reference:j,floating:w,refs:C}=r.useFloating({placement:a,middleware:[r.offset(f),r.b({mainAxis:m.mainAxis,crossAxis:m.crossAxis}),r.D({mainAxis:b.mainAxis,crossAxis:b.crossAxis,limiter:r.L({mainAxis:b.mainAxis,crossAxis:b.crossAxis})}),...g.current?[r.m({element:g.current})]:[]],whileElementsMounted:r.N,onPosition:R});s.useOutsideClick({isDisabled:!1,ref:C.floating,handler:n}),o.useLayoutEffect(()=>{if(A instanceof Element){return void j(A)}const t=A,e={getBoundingClientRect:()=>({width:0,height:0,x:t.x,y:t.y,top:t.y,left:t.x,right:t.x,bottom:t.y})};t&&null!=t.x&&j(e)},[A,j]);const P=o.useMemo(()=>i.mergeRefs(h,w),[h,w]);return e.jsxs("div",Object.assign({class:d,ref:P,style:{display:"block",visibility:null==k&&null==E?"hidden":"visible",position:"absolute",top:null!=E?E:"",left:null!=k?k:""}},{children:[t,e.jsx(c,{ref:g})]}))});t.Floating=a});
//# sourceMappingURL=Floating-31eefce3.js.map
