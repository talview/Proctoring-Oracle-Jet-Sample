define(["exports","preact/jsx-runtime","preact/hooks","./hooks/PRIVATE_useMessagesFocusManager","./PRIVATE_Message","./UNSAFE_Flex","./UNSAFE_LiveRegion","./Flex-556d723b","./MessagesManager-d521afd3","./MessageUtils-dfcb9ca9",'module',"./utils/PRIVATE_timer","./utils/UNSAFE_classNames","./classNames-429bf434","./MessageCloseButton-256615e9","./UNSAFE_Button","./Button-11c23c7a","./UNSAFE_BaseButton","./BaseButton-31fe1787","./tslib.es6-6a195797","./hooks/UNSAFE_usePress","./hooks/UNSAFE_useHover","./hooks/UNSAFE_useToggle","./hooks/UNSAFE_useActive","preact/compat","./utils/UNSAFE_interpolations/dimensions","./utils/UNSAFE_arrayUtils","./utils/UNSAFE_size","./_curry1-875b461d","./utils/UNSAFE_mergeInterpolations","./_curry3-512d483b","./_curry2-ad2c6a81","./_has-11a7a18f","./utils/PRIVATE_clientHints","./clientHints-9d985ef6","./hooks/UNSAFE_useTabbableMode","preact","./utils/UNSAFE_mergeProps","./index-6aed3532","./index-6f29250e","./UNSAFE_Icon","./Icon-b5704008","./hooks/UNSAFE_useTooltip","./hooks/UNSAFE_useId","./UNSAFE_Floating","./Floating-31eefce3","./index-4f4526ef","./hooks/UNSAFE_useUser","./UNSAFE_Environment","./UNSAFE_Layer","./utils/PRIVATE_floatingUtils","./utils/PRIVATE_refUtils","./hooks/UNSAFE_useOutsideClick","./hooks/UNSAFE_useFocus","./hooks/UNSAFE_useTouch","./hooks/UNSAFE_useAnimation","./useAnimation-5d80cd95","./hooks/UNSAFE_useTheme","./MessageDetail-8958ff27","./MessageFormattingUtils-66993387","./utils/UNSAFE_getLocale","./utils/UNSAFE_stringUtils","./stringUtils-432c5155","./Message.types-4bf5e2b8","./MessageStartIcon-9a21df9b","./MessageSummary-34220b0d","./MessageTimestamp-271609d9","./utils/UNSAFE_interpolations/boxalignment","./keys-83d1523f","./utils/UNSAFE_interpolations/flexbox","./flexbox-aaa40e19","./utils/UNSAFE_interpolations/flexitem","./flexitem-d85d1561","./utils/UNSAFE_logger","./utils/UNSAFE_soundUtils","./PRIVATE_TransitionGroup","./hooks/UNSAFE_useMessagesContext"],function(e,s,t,n,o,i,a,l,r,u,c,g,d,h,_,f,F,A,E,U,S,m,N,x,v,b,p,k,M,R,y,T,I,j,H,B,P,C,w,O,V,L,z,$,D,G,K,W,q,J,Q,X,Y,Z,ee,se,te,ne,oe,ie,ae,le,re,ue,ce,ge,de,he,_e,fe,Fe,Ae,Ee,Ue,Se,me,Ne){"use strict";const xe={entering:e=>({to:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"},options:{duration:250},end:{maxHeight:"none",overflow:"initial"}}),exiting:e=>Object.assign(Object.assign({},"none"===e.style.maxHeight&&{from:{maxHeight:`${e.scrollHeight}px`,overflow:"hidden"}}),{to:{maxHeight:0,overflow:"hidden"},end:{maxHeight:0,overflow:"hidden"},options:{duration:250}})},ve={maxHeight:0,overflow:"hidden"};e.MessageBanner=function({closeButtonRenderer:e,detailRendererKey:i,data:c,onClose:g,renderers:d,translations:h,type:_="section"}){const f=t.useRef(new Map),F=t.useRef(null),A=t.useRef(null),[E,U]=t.useState(),[S,m]=t.useState(c.length>0),N=t.useRef(c.length),x=t.useRef(0);N.current=c.length;const v=t.useCallback(e=>s=>f.current.set(e,s),[]);t.useImperativeHandle(A,()=>({focus:()=>{var e;if(c.length){const s=c[0].key;return null===(e=f.current.get(s))||void 0===e||e.focus(),!0}return!1},contains:e=>{var s,t;return!(!c.length||!e)&&(null!==(t=null===(s=F.current)||void 0===s?void 0:s.contains(e))&&void 0!==t&&t)}}),[c]);const{controller:b,handlers:p}=n.useMessageFocusManager(A,{onFocus:t.useCallback(()=>{U(null==h?void 0:h.navigationFromMessagesRegion)},[U,h])}),k=t.useCallback(e=>{null==g||g(e)},[g]),M=t.useCallback((e,s,t)=>{var n;const o=null==t?void 0:t.contains(document.activeElement);if(0===N.current)return m(!1),void(o&&b.restorePriorFocus());const i=s+1<c.length?s+1:s-1;if(i>-1&&o){const e=c[i].key;null===(n=f.current.get(e))||void 0===n||n.focus()}},[b,c]);return t.useEffect(()=>{c.length?(m(!0),c.length>x.current&&U(null==h?void 0:h.navigationToMessagesRegion),b.prioritize()):U(""),x.current=c.length},[b,c,h]),S||0!==c.length?s.jsx("div",Object.assign({ref:F,class:"oj-c-messagebanner",tabIndex:-1},p,{children:s.jsxs(l.Flex,Object.assign({direction:"column",gap:"section"===_?"1x":void 0},{children:[s.jsx(r.MessagesManager,Object.assign({animationStates:xe,initialAnimationStyles:ve,data:c,onMessageWillRemove:M},{children:({index:t,item:n})=>s.jsx(o.Message,{messageRef:v(n.key),item:n,closeButtonRenderer:e,detailRenderer:u.getRenderer(n,i,d),index:t,variant:"page"===_?"pageBanner":"sectionBanner",onClose:k,translations:h},n.key)})),s.jsx(a.LiveRegion,{children:E})]}))})):null},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=UNSAFE_MessageBanner.js.map
